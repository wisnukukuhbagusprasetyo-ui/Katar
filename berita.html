<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Berita | Karang Taruna Cilosari Barat</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: #f5f7fa;
  color: #1e293b;
}
header {
  background: linear-gradient(90deg, #0e4c92, #1a6ac2);
  color: #fff;
  padding: 1rem;
  text-align: center;
}
main {
  max-width: 900px;
  margin: 2rem auto;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 2rem;
}
h1 {
  color: #0e4c92;
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}
img {
  width: 100%;
  border-radius: 10px;
  margin-bottom: 1rem;
}
p {
  line-height: 1.7;
  margin-bottom: 1rem;
}
small {
  color: #475569;
}
button {
  background: #0e4c92;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 0.5rem 1rem;
  font-weight: 600;
  cursor: pointer;
}
button:hover {
  background: #f6c445;
  color: #0e4c92;
}
footer {
  text-align: center;
  padding: 1rem;
  background: #0e4c92;
  color: #fff;
  margin-top: 2rem;
}
.loader {
  text-align: center;
  color: #0e4c92;
  font-weight: 600;
  margin-top: 2rem;
}
</style>
</head>
<body>

<header>
  <h2>üì∞ Berita Karang Taruna Cilosari Barat</h2>
</header>

<main id="beritaContainer">
  <div class="loader">Memuat berita...</div>
</main>

<div style="text-align:center;margin-top:1rem;">
  <button onclick="window.location.href='index.html'">‚¨ÖÔ∏è Kembali ke Beranda</button>
</div>

<footer>
  <p>&copy; 2025 Karang Taruna Cilosari Barat RT01/RW08 - Semarang Timur</p>
</footer>

<script type="module">
import { db } from "./js/firebase.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

// Ambil parameter id dari URL
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

const container = document.getElementById("beritaContainer");

if (!id) {
  container.innerHTML = "<p>‚ùå ID berita tidak ditemukan.</p>";
} else {
  loadBeritaDetail(id);
}

async function loadBeritaDetail(id) {
  try {
    const ref = doc(db, "berita", id);
    const snap = await getDoc(ref);
    if (!snap.exists()) {
      container.innerHTML = "<p>‚ö†Ô∏è Berita tidak ditemukan atau telah dihapus.</p>";
      return;
    }

    const b = snap.data();
    const tanggal = b.createdAt?.toDate
      ? b.createdAt.toDate().toLocaleString("id-ID", { dateStyle: "long", timeStyle: "short" })
      : "(tanggal tidak tersedia)";

    container.innerHTML = `
      <h1>${b.judul}</h1>
      ${b.foto ? `<img src="${b.foto}" alt="${b.judul}">` : ""}
      <p>${b.isi}</p>
      <small>üïì ${tanggal} | ‚úçÔ∏è ${b.penulis || "Admin Karang Taruna"}</small>
    `;
  } catch (e) {
    console.error(e);
    container.innerHTML = "<p>Terjadi kesalahan saat memuat berita.</p>";
  }
}
</script>

</body>
</html>