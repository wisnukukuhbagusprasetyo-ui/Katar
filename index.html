<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karang Taruna Cilosari Barat</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary:#0e4c92;
  --accent:#f6c445;
  --text:#1e293b;
  --bg:#f9fafb;
  --card:#fff;
}
body.dark {
  --primary:#082c55;
  --accent:#ffd84d;
  --text:#e2e8f0;
  --bg:#0f172a;
  --card:#1e293b;
}

/* === RESET & BASE === */
*{box-sizing:border-box;transition:background .3s,color .3s;}
body{
  font-family:'Poppins',sans-serif;
  margin:0;
  background:var(--bg);
  color:var(--text);
  scroll-behavior:smooth;
}

/* === NAVBAR === */
nav{
  position:fixed;
  top:0;left:0;right:0;
  background:rgba(14,76,146,0.95);
  color:#fff;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:.8rem 1.5rem;
  z-index:100;
  backdrop-filter:blur(10px);
}
nav h1{font-size:1.2rem;margin:0;font-weight:700}
nav ul{list-style:none;margin:0;padding:0;display:flex;gap:1rem;align-items:center;}
nav ul li a{color:#fff;text-decoration:none;font-weight:600}
nav ul li a:hover{color:var(--accent)}
nav .right{display:flex;align-items:center;gap:1rem;}
nav button{
  background:var(--accent);
  border:none;
  padding:.5rem .9rem;
  border-radius:6px;
  color:var(--primary);
  font-weight:600;
  cursor:pointer;
}
nav button:hover{background:#fff;color:var(--primary);}
#modeToggle{
  background:none;
  border:2px solid var(--accent);
  border-radius:50%;
  width:36px;height:36px;
  font-size:1.1rem;
  color:var(--accent);
  cursor:pointer;
}

/* === HERO === */
.hero{
  background:linear-gradient(135deg,var(--primary),#1a6ac2);
  color:#fff;
  text-align:center;
  padding:6rem 1rem 4rem;
  margin-top:60px;
}
.hero h2{margin:0;font-size:2.2rem;font-weight:700;}
.hero p{margin-top:.5rem;font-weight:400;opacity:.9;}

/* === MAIN CONTENT === */
main{max-width:1100px;margin:auto;padding:2rem 1rem;}
h2{color:var(--primary);border-left:5px solid var(--accent);padding-left:.5rem;margin-top:2rem;}
.grid{
  display:grid;
  gap:1rem;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
}
.card{
  background:var(--card);
  padding:1rem;
  border-radius:10px;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
  opacity:0;
  transform:translateY(20px);
  animation:fadeUp .8s ease forwards;
}
.card img{width:100%;border-radius:8px;margin-bottom:.6rem;}
.card h3{margin:.3rem 0;}
.card a{color:var(--primary);text-decoration:none;font-weight:600;}
.card:hover{transform:translateY(-4px);box-shadow:0 4px 14px rgba(0,0,0,.15);}

/* === ANIMASI === */
@keyframes fadeUp{to{opacity:1;transform:translateY(0);}}

/* === FOOTER & BUTTON TO TOP === */
footer{text-align:center;padding:2rem;color:#fff;background:var(--primary);margin-top:3rem;}
#toTop{
  position:fixed;
  bottom:30px;right:30px;
  background:var(--accent);
  color:var(--primary);
  border:none;
  padding:.6rem .8rem;
  border-radius:50%;
  font-size:1.3rem;
  cursor:pointer;
  display:none;
}
#toTop.show{display:block;}
@media(max-width:700px){
  nav ul{display:none;}
  nav.active ul{display:flex;flex-direction:column;position:absolute;top:60px;right:15px;background:var(--primary);padding:1rem;border-radius:8px;}
  .menu-toggle{display:block;cursor:pointer;font-size:1.4rem;}
}
.menu-toggle{display:none;color:#fff;}
</style>
</head>
<body>

<!-- === NAVIGATION === -->
<nav>
  <h1>Karang Taruna Cilosari Barat</h1>
  <span class="menu-toggle">‚ò∞</span>
  <ul>
    <li><a href="#berita">Berita</a></li>
    <li><a href="#umkm">UMKM</a></li>
    <li><a href="#kontak">Kontak</a></li>
  </ul>
  <div class="right">
    <button onclick="location.href='login.html'">Login</button>
    <button id="modeToggle" title="Ganti Mode">‚òÄÔ∏è</button>
  </div>
</nav>

<!-- === HERO === -->
<section class="hero">
  <h2>RT01/RW08 Kelurahan Kemijen, Semarang Timur</h2>
  <p>Bersatu, Berdaya, dan Kreatif bersama Karang Taruna Cilosari Barat</p>
</section>

<!-- === MAIN === -->
<main>
  <section id="berita">
    <h2>üì∞ Berita Terbaru</h2>
    <div id="beritaList" class="grid"></div>
  </section>

  <section id="umkm">
    <h2>üè™ UMKM Binaan</h2>
    <div id="umkmList" class="grid"></div>
  </section>

  <section id="kontak">
    <h2>üìû Kontak Kami</h2>
    <p>Alamat: Cilosari Barat RT01/RW08, Kelurahan Kemijen, Semarang Timur</p>
    <p>Instagram: <a href="https://instagram.com/karangtaruna_cilosari" target="_blank">@karangtaruna_cilosari</a></p>
    <p>TikTok: <a href="https://tiktok.com/@karangtaruna_cilosari" target="_blank">@karangtaruna_cilosari</a></p>
  </section>
</main>

<footer>
  ¬© 2025 Karang Taruna Cilosari Barat RT01/RW08 ‚Äì Semarang Timur
</footer>

<button id="toTop">‚Üë</button>

<!-- === SCRIPT === -->
<script type="module">
import { db } from './js/firebase.js';
import { collection, getDocs, orderBy, query } 
  from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

// --- Responsive Navbar ---
const nav=document.querySelector('nav');
const toggle=document.querySelector('.menu-toggle');
toggle.addEventListener('click',()=>nav.classList.toggle('active'));

// --- Mode Gelap / Terang ---
const toggleBtn=document.getElementById('modeToggle');
const body=document.body;
let darkMode=localStorage.getItem('darkMode')==='true';
applyMode();

toggleBtn.onclick=()=>{
  darkMode=!darkMode;
  localStorage.setItem('darkMode',darkMode);
  applyMode();
};
function applyMode(){
  if(darkMode){
    body.classList.add('dark');
    toggleBtn.textContent='üåô';
  }else{
    body.classList.remove('dark');
    toggleBtn.textContent='‚òÄÔ∏è';
  }
}

// --- Tombol ke atas ---
const toTop=document.getElementById('toTop');
window.addEventListener('scroll',()=>{
  if(window.scrollY>400){toTop.classList.add('show');}
  else{toTop.classList.remove('show');}
});
toTop.onclick=()=>window.scrollTo({top:0,behavior:'smooth'});

// === LOAD BERITA ===
async function loadBerita(){
  const container=document.getElementById('beritaList');
  const snap=await getDocs(query(collection(db,'berita'),orderBy('createdAt','desc')));
  container.innerHTML="";
  snap.forEach(docu=>{
    const b=docu.data();
    const id=docu.id;
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`
      ${b.foto?`<img src="${b.foto}" alt="${b.judul}">`:''}
      <h3><a href="berita.html?id=${id}">${b.judul}</a></h3>
      <p>${b.isi.substring(0,120)}...</p>
      <a href="berita.html?id=${id}">Baca selengkapnya ‚Üí</a>
    `;
    container.appendChild(div);
  });
}

// === LOAD UMKM ===
async function loadUmkm(){
  const container=document.getElementById('umkmList');
  const snap=await getDocs(query(collection(db,'umkm'),orderBy('createdAt','desc')));
  container.innerHTML="";
  snap.forEach(docu=>{
    const u=docu.data();
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`
      ${u.foto?`<img src="${u.foto}" alt="${u.nama}">`:''}
      <h3>${u.nama}</h3>
      <p>${u.deskripsi||''}</p>
    `;
    container.appendChild(div);
  });
}
loadBerita();
loadUmkm();
</script>
</body>
</html>