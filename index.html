<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karang Taruna Cilosari Barat</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Poppins',sans-serif;margin:0;background:#f9fafb;color:#1e293b}
header{background:#0e4c92;color:#fff;padding:1rem;text-align:center}
main{max-width:1100px;margin:auto;padding:1rem}
h2{color:#0e4c92;border-left:5px solid #f6c445;padding-left:.5rem}
.grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.card{background:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
.card img{width:100%;border-radius:8px;margin-top:.5rem}
footer{text-align:center;padding:1rem;color:#64748b;margin-top:2rem}
</style>
</head>
<body>
<header>
  <h1>Karang Taruna Cilosari Barat RT01/RW08</h1>
  <p>Semarang Timur â€“ Berdaya, Bersatu, dan Kreatif</p>
</header>

<main>
  <h2>ğŸ“° Berita Terbaru</h2>
  <div id="beritaList" class="grid"></div>

  <h2>ğŸª UMKM Binaan</h2>
  <div id="umkmList" class="grid"></div>
</main>

<footer>Â© 2025 Karang Taruna Cilosari Barat RT01/RW08</footer>

<script src="./env.js"></script>
<script type="module">
import { db } from './js/firebase.js';
import { collection, getDocs, orderBy, query } 
  from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

async function loadBerita(){
  const container=document.getElementById('beritaList');
  const snap=await getDocs(query(collection(db,'berita'),orderBy('createdAt','desc')));
  container.innerHTML="";
  snap.forEach(d=>{
    const b=d.data();
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${b.judul}</h3><p>${b.isi}</p>${b.foto?`<img src="${b.foto}">`:''}`;
    container.appendChild(div);
  });
}
async function loadUmkm(){
  const container=document.getElementById('umkmList');
  const snap=await getDocs(query(collection(db,'umkm'),orderBy('createdAt','desc')));
  container.innerHTML="";
  snap.forEach(d=>{
    const u=d.data();
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${u.nama}</h3><p>${u.deskripsi||''}</p>${u.foto?`<img src="${u.foto}">`:''}`;
    container.appendChild(div);
  });
}
loadBerita();
loadUmkm();
</script>
</body>
</html>